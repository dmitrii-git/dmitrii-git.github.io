<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Git Commander</title>
<style>
  body {
    margin: 0;
    background: #000040;
    color: #c0c0c0;
    font-family: "Courier New", monospace;
    font-size: 14px;
  }
  .top {
    background: #000080;
    padding: 4px 8px;
    color: white;
    font-weight: bold;
  }
  .container {
    display: flex;
    height: calc(100vh - 60px);
  }
  .panel {
    flex: 1;
    border: 1px solid #8080ff;
    margin: 4px;
    display: flex;
    flex-direction: column;
  }
  .panel-header {
    background: #000080;
    padding: 4px;
    color: white;
    font-weight: bold;
  }
  .panel-body {
    flex: 1;
    overflow-y: auto;
    padding: 4px;
    white-space: pre;
  }
  .item {
    cursor: pointer;
  }
  .item:hover {
    background: #0000a0;
  }
  .folder::before {
    content: "[DIR] ";
    color: #ffff00;
  }
  .file::before {
    content: "      ";
  }
  .status {
    background: #000080;
    padding: 4px;
    color: white;
    font-size: 12px;
  }
</style>
</head>
<body>

<div class="top">Git Commander â€“ GitHub NC Explorer</div>

<div class="container">
  <div class="panel">
    <div class="panel-header">LEFT: Repositories</div>
    <div class="panel-body" id="left"></div>
  </div>

  <div class="panel">
    <div class="panel-header" id="right-header">RIGHT: Files</div>
    <div class="panel-body" id="right"></div>
  </div>
</div>

<div class="status">F1 Help   F3 View   F10 Quit</div>

<script>
const user = "dmitrii-git";

async function loadRepos() {
  const res = await fetch(`https://api.github.com/users/${user}/repos`);
  const repos = await res.json();
  const left = document.getElementById("left");
  left.innerHTML = "";

  repos.forEach(repo => {
    const div = document.createElement("div");
    div.className = "item folder";
    div.textContent = repo.name;
    div.onclick = () => loadRepoFiles(repo.name);
    left.appendChild(div);
  });
}

async function loadRepoFiles(repo) {
  document.getElementById("right-header").textContent = `RIGHT: ${repo}`;
  const res = await fetch(`https://api.github.com/repos/${user}/${repo}/contents`);
  const files = await res.json();
  const right = document.getElementById("right");
  right.innerHTML = "";

  // Add "go back"
  const back = document.createElement("div");
  back.className = "item folder";
  back.textContent = "..";
  back.onclick = () => right.innerHTML = "";
  right.appendChild(back);

  files.forEach(file => {
    const div = document.createElement("div");
    div.className = "item " + (file.type === "dir" ? "folder" : "file");
    div.textContent = file.name;

    if (file.type === "dir") {
      div.onclick = () => loadSubfolder(repo, file.path);
    } else {
      div.onclick = () => window.open(file.html_url, "_blank");
    }
    right.appendChild(div);
  });
}

async function loadSubfolder(repo, path) {
  const res = await fetch(`https://api.github.com/repos/${user}/${repo}/contents/${path}`);
  const files = await res.json();
  const right = document.getElementById("right");
  right.innerHTML = "";

  const back = document.createElement("div");
  back.className = "item folder";
  back.textContent = "..";
  back.onclick = () => loadRepoFiles(repo);
  right.appendChild(back);

  files.forEach(file => {
    const div = document.createElement("div");
    div.className = "item " + (file.type === "dir" ? "folder" : "file");
    div.textContent = file.name;

    if (file.type === "dir") {
      div.onclick = () => loadSubfolder(repo, file.path);
    } else {
      div.onclick = () => window.open(file.html_url, "_blank");
    }
    right.appendChild(div);
  });
}

loadRepos();
</script>

</body>
</html>
